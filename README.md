# Floodingnaque - Flood Prediction System for Parañaque City

Random Forest-Based Flood Detection and Alert System

[![Python](https://img.shields.io/badge/python-3.8%2B-blue)](https://www.python.org/)
[![License](https://img.shields.io/github/license/KyaRhamil/floodingnaque)](LICENSE)
[![Last Updated](https://img.shields.io/github/last-commit/KyaRhamil/floodingnaque)](#)

## Table of Contents

- [Overview](#overview)
- [Official Flood Records Training](#official-flood-records-training-2022-2025)
- [Latest Enhancements](#latest-enhancements)
- [Frequently Asked Questions](#frequently-asked-questions)
- [Recommended Workflows](#recommended-workflows)
- [System Architecture](#system-architecture)
- [Random Forest Model](#random-forest-model-features)
- [Command Reference](#command-reference)
- [Documentation](#documentation)
- [Thesis Defense Materials](#thesis-defense-materials)
- [Installation](#installation)
- [Expected Performance](#expected-performance)
- [Key Features](#key-features)
- [License](#license)

## Overview

This project implements a **Random Forest machine learning model** to predict flood risks in Parañaque City with a **3-level risk classification system** (Safe/Alert/Critical). The system is designed for academic research and production deployment.

## Official Flood Records Training (2022-2025)

Train models with **3,700+ real flood events** from the Parañaque City Disaster Risk Reduction and Management Office (DRRMO).

| Feature | Description |
|---------|-------------|
| Data Source | Official government records from DRRMO |
| Coverage | 4 years of historical records (2022-2025) |
| Training Method | Progressive training showing model evolution |
| Preprocessing | Comprehensive handling of diverse CSV formats |
| Output | Publication-ready visualizations for thesis presentations |

This enhancement provides significantly stronger thesis support compared to projects using synthetic data.

### Quick Start References

| Guide | Description |
|-------|-------------|
| [OFFICIAL_RECORDS_QUICK_START.md](OFFICIAL_RECORDS_QUICK_START.md) | Training with real flood data |
| [RANDOM_FOREST_THESIS_READY.md](RANDOM_FOREST_THESIS_READY.md) | Complete thesis preparation guide |

---

## Latest Enhancements

### New Features for Thesis Defense

| Feature | Description |
|---------|-------------|
| Official Flood Records Training | 3,700+ real flood events from Parañaque City (2022-2025) with progressive training |
| Enhanced Training Script | Hyperparameter tuning with GridSearchCV |
| Thesis Report Generator | Publication-ready visualizations (300 DPI) |
| Dataset Merger Tool | Combine multiple CSV files easily |
| Model Comparison | Compare performance across versions |
| Automatic Versioning | Track all model improvements |
| Comprehensive Documentation | Complete guides and references |

### Model Evolution Visualization

Track model improvement over time with:

| Visualization | Purpose |
|---------------|---------|
| Metrics Evolution Charts | View accuracy, precision, recall improvement |
| Parameters Evolution | Track hyperparameter changes |
| Feature Importance Comparison | Understand prediction drivers |

## Frequently Asked Questions

### Can I add new CSV files for training?

Yes. Use the following commands:

```powershell
cd backend
python scripts/train.py --data data/your_new_file.csv
```

To merge multiple files:

```powershell
python scripts/merge_datasets.py --input "data/*.csv"
python scripts/train.py --data data/merged_dataset.csv
```

### How does model versioning work?

**With Official Records (Progressive Training):**

| Version | Training Data | Record Count |
|---------|---------------|--------------|
| Model v1 | 2022 data only | ~100 records |
| Model v2 | 2022 + 2023 data | ~270 records |
| Model v3 | 2022 + 2023 + 2024 | ~1,100 records |
| Model v4 | All data (2022-2025) | ~3,700 records (Best) |

**With Custom Data:**

Each training session creates:
- Model file (.joblib)
- Metadata (.json) with training date, dataset, parameters, metrics, and feature importance
## Recommended Workflows

### Option A: Train with Official Flood Records (Recommended)

Use real flood data from Parañaque City (2022-2025):

```powershell
cd backend

# Step 1: Preprocess official records
python scripts/preprocess_official_flood_records.py

# Step 2: Progressive training (shows model evolution)
python scripts/progressive_train.py --grid-search --cv-folds 10

# Step 3: Generate thesis materials
python scripts/generate_thesis_report.py
python scripts/compare_models.py

# Step 4: Validate
python scripts/validate_model.py
```

**Output:**
- 4 models trained on real data (v1, v2, v3, v4)
- 3,700+ real flood events from official records
- Model evolution showing improvement over time
- Publication-ready charts and reports

### Option B: Custom Training Pipeline

Use your own CSV files:

```powershell
cd backend

# Step 1: Merge all datasets
python scripts/merge_datasets.py --input "data/*.csv"

# Step 2: Train optimal model (with hyperparameter tuning)
python scripts/train.py --data data/merged_dataset.csv --grid-search --cv-folds 10

# Step 3: Generate thesis presentation materials
python scripts/generate_thesis_report.py

# Step 4: Compare model versions
python scripts/compare_models.py

# Step 5: Validate
python scripts/validate_model.py
```

**Generated Reports (Publication Quality):**

| Report | Description |
|--------|-------------|
| Feature importance chart | Shows prediction drivers |
| Confusion matrix | Prediction accuracy visualization |
| ROC curve | Model performance curve |
| Precision-Recall curve | Classification threshold analysis |
| Metrics comparison | Cross-version comparison |
| Learning curves | Overfitting analysis |
| Version comparison charts | Side-by-side model performance |
## System Architecture

```
Official Flood Records (2022-2025)
            |
            v
      Preprocessing
            |
            +---> Progressive Training ---> Random Forest Models (v1, v2, v3, v4)
            |
Custom CSV Files ---> Data Merger ---> Training Script
                                              |
                                              v
                                       Model Versions
                                              |
                                              v
                                         Flask API
                                              |
                                              v
                                 3-Level Risk Classification
                                   (Safe / Alert / Critical)
                                              |
                                              v
                                       Alert Delivery
                                       (SMS / Email)
```

## Random Forest Model Features

### Why Random Forest?

| Advantage | Description |
|-----------|-------------|
| Ensemble Learning | Multiple decision trees voting together |
| Robust | Less prone to overfitting |
| Feature Importance | Shows which weather factors matter most |
| No Scaling Needed | Works with raw weather data |
| Interpretable | Easy to explain to stakeholders |
| Industry Standard | Widely used in production systems |

### Model Capabilities

| Capability | Description |
|------------|-------------|
| Hyperparameter Tuning | Automatic optimization with GridSearchCV |
| Cross-Validation | Robust k-fold validation |
| Multi-Dataset Training | Merge multiple CSV files |
| Automatic Versioning | Track improvements over time |
| Comprehensive Metrics | Accuracy, Precision, Recall, F1, ROC-AUC |
| Feature Importance Analysis | Understand model decisions |

## Command Reference

### Training Commands

```powershell
# Basic training
python scripts/train.py

# With new dataset
python scripts/train.py --data data/my_data.csv

# With hyperparameter tuning (Recommended)
python scripts/train.py --grid-search --cv-folds 10

# Merge multiple datasets during training
python scripts/train.py --data "data/*.csv" --merge-datasets

# Progressive training with official records (Recommended for thesis)
python scripts/progressive_train.py --grid-search --cv-folds 10

# Year-specific training
python scripts/progressive_train.py --year-specific
```

### Analysis Commands

```powershell
# Generate thesis report
python scripts/generate_thesis_report.py

# Compare model versions
python scripts/compare_models.py

# Merge datasets
python scripts/merge_datasets.py

# Preprocess official flood records
python scripts/preprocess_official_flood_records.py
```

### API Commands

```powershell
# Start server
python main.py

# Test prediction
curl -X POST http://localhost:5000/predict -H "Content-Type: application/json" -d "{\"temperature\": 25.0, \"humidity\": 80.0, \"precipitation\": 15.0}"

# List models
curl http://localhost:5000/api/models
```

## Documentation

### Quick References

| Document | Description |
|----------|-------------|
| [RANDOM_FOREST_THESIS_READY.md](RANDOM_FOREST_THESIS_READY.md) | Quick start for thesis |
| [OFFICIAL_RECORDS_QUICK_START.md](OFFICIAL_RECORDS_QUICK_START.md) | Training with official flood records |
| [backend/docs/QUICK_REFERENCE.md](backend/docs/QUICK_REFERENCE.md) | Command cheat sheet |
| [backend/docs/THESIS_GUIDE.md](backend/docs/THESIS_GUIDE.md) | Complete thesis guide |

### Detailed Guides

| Document | Description |
|----------|-------------|
| [backend/docs/OFFICIAL_FLOOD_RECORDS_GUIDE.md](backend/docs/OFFICIAL_FLOOD_RECORDS_GUIDE.md) | Complete guide for official records training |
| [backend/docs/IMPROVEMENTS_SUMMARY.md](backend/docs/IMPROVEMENTS_SUMMARY.md) | All improvements explained |
| [backend/docs/SYSTEM_OVERVIEW.md](backend/docs/SYSTEM_OVERVIEW.md) | System architecture |
| [backend/docs/MODEL_MANAGEMENT.md](backend/docs/MODEL_MANAGEMENT.md) | Model versioning |
| [backend/docs/BACKEND_COMPLETE.md](backend/docs/BACKEND_COMPLETE.md) | Full documentation |

## Thesis Defense Materials

### Key Talking Points

**About Random Forest:**
- Ensemble of 200 decision trees
- Each tree votes on prediction
- Majority decision wins
- Feature importance shows which factors matter most

**About the System:**
- Automatic model versioning
- Easy dataset integration
- Hyperparameter optimization
- 3-level risk classification (Safe/Alert/Critical)
- Real-time predictions via API
- Progressive training with 3,700+ real flood events
- Model evolution demonstrating improvement over time

### Generated Presentation Materials

All materials are automatically generated in the `reports/` directory:

| Material | Description |
|----------|-------------|
| Feature importance | Which weather factors matter |
| Confusion matrix | Prediction accuracy |
| ROC curve | Model performance |
| Learning curves | Overfitting analysis |
| Metrics evolution | Improvement over time |
| Parameters evolution | Hyperparameter changes |
| Model comparison charts | Side-by-side performance |
## Installation

### Requirements

- Python 3.8 or higher
- pip package manager

### Setup

```powershell
# Clone repository
git clone https://github.com/KyaRhamil/floodingnaque.git
cd floodingnaque/backend

# Install dependencies
pip install -r requirements.txt

# Train model
python scripts/train.py

# Start API
python main.py
```

## Expected Performance

### Performance Metrics (with Grid Search Optimization)

| Metric | Expected Value |
|--------|----------------|
| Accuracy | 95%+ |
| Precision | 95%+ |
| Recall | 95%+ |
| F1 Score | 95%+ |
| ROC-AUC | 0.98+ |

### Feature Importance (Example)

| Feature | Importance |
|---------|------------|
| Precipitation | 45% |
| Humidity | 30% |
| Temperature | 20% |
| Wind Speed | 5% |

## Key Features

### Data Management

| Feature | Description |
|---------|-------------|
| CSV Integration | Easy import of custom datasets |
| Multi-dataset Merging | Combine multiple CSV files |
| Duplicate Removal | Automatic deduplication |
| Column Validation | Schema validation |
| Official Records Preprocessing | Support for 2022-2025 flood records |

### Model Training

| Feature | Description |
|---------|-------------|
| Random Forest Classifier | Ensemble learning algorithm |
| Hyperparameter Tuning | GridSearchCV optimization |
| Cross-validation | K-fold validation |
| Automatic Versioning | Version tracking |
| Progressive Training | Model evolution visualization |
| Year-specific Training | Train on specific date ranges |

### Evaluation

| Feature | Description |
|---------|-------------|
| Comprehensive Metrics | Full performance analysis |
| Publication-quality Charts | 300 DPI visualizations |
| Feature Importance Analysis | Prediction driver analysis |
| Model Comparison Tools | Cross-version comparison |
| Metrics Evolution | Performance tracking over time |

### Deployment

| Feature | Description |
|---------|-------------|
| Flask REST API | RESTful web service |
| 3-level Risk Classification | Safe/Alert/Critical levels |
| Real-time Predictions | Low-latency inference |
| Alert Delivery System | SMS and email notifications |

## Support

For detailed instructions, see the documentation in `backend/docs/`.

## License

See the [LICENSE](LICENSE) file for details.