[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test markers for categorization
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (require running server)
    security: Security-focused tests
    load: Load/performance tests (require locust)
    model: ML model-specific tests
    slow: Tests that take longer to run
    edge_cases: Edge case and boundary testing

# Default options with coverage enforcement
# Requires pytest-cov: pip install pytest-cov
addopts = -v --strict-markers --cov=app --cov-report=term-missing --cov-report=html --cov-fail-under=85

# Coverage settings
# - Minimum 85% coverage required to pass
# - HTML report generated in htmlcov/
# - Terminal output shows missing lines

# Warning filters
filterwarnings =
    # Ignore SQLAlchemy internal deprecation warning (utcfromtimestamp in sqltypes.py)
    # This is an internal SQLAlchemy issue, not in project code
    ignore:datetime.datetime.utcfromtimestamp\(\) is deprecated:DeprecationWarning:sqlalchemy
    # Ignore APScheduler pkg_resources deprecation warning (will be fixed in future version)
    ignore:pkg_resources is deprecated:UserWarning:apscheduler
    # Ignore numpy deprecation warnings in dependencies
    ignore:numpy.ndarray size changed:RuntimeWarning

# Minimum pytest version
minversion = 7.0

# Test timeout (optional, requires pytest-timeout)
# timeout = 300
