[mypy]
# Python version targeting
python_version = 3.12

# General settings
warn_return_any = False
warn_unused_configs = True
warn_redundant_casts = True
warn_unused_ignores = False
warn_no_return = False
warn_unreachable = False
show_error_codes = True
show_column_numbers = True
pretty = True

# Strictness settings (relaxed for gradual adoption)
strict_optional = False
no_implicit_optional = False
check_untyped_defs = False
disallow_untyped_decorators = False
disallow_incomplete_defs = False
disallow_untyped_defs = False

# Disable specific error codes that cause most issues
disable_error_code = assignment, arg-type, return-value, union-attr, index, attr-defined, dict-item, var-annotated, misc, valid-type, import-untyped, operator, name-defined, has-type, used-before-def

# Import handling
ignore_missing_imports = True
follow_imports = normal
exclude = ^(venv|.venv|env|.env|frontend/node_modules|backend/venv|backend/.venv|backend/env|backend/.env)/

# Error output
show_error_context = True
error_summary = True

# Paths to check
files = app/

# Per-module overrides for gradual adoption
# Start lenient, tighten over time as type annotations are added

[mypy-app.api.*]
# API routes - lenient initially
disallow_untyped_defs = False

[mypy-app.models.*]
# SQLAlchemy models - lenient due to Base class issues
disallow_untyped_defs = False
disable_error_code = misc,valid-type

[mypy-app.services.*]
# Service layer - lenient initially
disallow_untyped_defs = False

[mypy-app.core.*]
# Core modules - lenient initially
disallow_untyped_defs = True

[mypy-app.utils.*]
# Utility modules - lenient
disallow_untyped_defs = False

[mypy-tests.*]
# Test files - lenient
disallow_untyped_defs = False
ignore_errors = True

# Third-party library stubs (some libraries lack type stubs)
[mypy-sqlalchemy.*]
ignore_missing_imports = True

[mypy-flask.*]
ignore_missing_imports = True

[mypy-werkzeug.*]
ignore_missing_imports = True

[mypy-requests.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

[mypy-sentry_sdk.*]
ignore_missing_imports = True

[mypy-fastapi.*]
ignore_missing_imports = True

[mypy-pydantic.*]
ignore_missing_imports = True

[mypy-sklearn.*]
ignore_missing_imports = True

[mypy-pandas.*]
ignore_missing_imports = True

[mypy-numpy.*]
ignore_missing_imports = True

[mypy-xgboost.*]
ignore_missing_imports = True

[mypy-tensorflow.*]
ignore_missing_imports = True

[mypy-keras.*]
ignore_missing_imports = True

[mypy-alembic.*]
ignore_missing_imports = True

[mypy-ee.*]
ignore_missing_imports = True

[mypy-google.*]
ignore_missing_imports = True

[mypy-passlib.*]
ignore_missing_imports = True

[mypy-jose.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-prometheus_client.*]
ignore_missing_imports = True

[mypy-locust.*]
ignore_missing_imports = True

[mypy-shap.*]
ignore_missing_imports = True

[mypy-opentelemetry.*]
ignore_missing_imports = True
ignore_errors = True
follow_imports = skip

[mypy-opentelemetry.trace]
ignore_missing_imports = True
ignore_errors = True
follow_imports = skip

[mypy-opentelemetry.trace.*]
ignore_missing_imports = True
ignore_errors = True
follow_imports = skip
